<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Web Server</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
     body {
            background-color: #212121;
            margin: 0;
            font-family: Arial, sans-serif;
        }

    .markdown-body {
            background-color: #212121; 
            padding: 20px;
            max-width: 800px;
            margin: auto;
            font-size: 14px;
            color: white;
        }
    </style>
</head>
<body>
    <div id="markdown-content" class="markdown-body"></div>
    <script type="text/markdown" id="markdown-script">
# Building an HTTP Server in C

## Overview
I am beginning a personal project to create a web server in C. 

**server.c Flow So Far**: 
- Creates a new socket, binds it using the IPv4 option, and listens using the file descriptor for the new socket.   
- Enters infinite while loop for accepting connections.
- Accepts a connection and assigns a file descriptor for the new client.
- Reads from the file descriptor into a buffer.
- Parses the buffer to extract the method (GET, POST, PUT, etc.) and the path/route.
- Creates new POSIX thread and invokes a 'start routine' serve_file_aux() to attempt to serve the requested file to the client, passing the client file descriptor and filepath.
- Continue in loop, accepting up to 3 connections.

## Intended Features

- THREAD_COUNT global variable that acts as a pool of available threads such that the server could serve up to THREAD_COUNT connections at once, and listen for SOMAXCONN connections in a backlog.

- Modify serving based on method and file type.

- Already have a pool of threads created before accepting to speed up serving.

- Log requests to server periodically.

- Cache repeatedly served files into RAM or mmap into the main process address space (I need to look into this first).

- Switch to port 80.
    </script>

    <script>
        const markdown = document.getElementById('markdown-script').textContent;
        document.getElementById('markdown-content').innerHTML = marked.parse(markdown);
    </script>
</body>
</html>
